<template>
  <div class="content">
    <div class="tiles white">
      <div class="row">
        <div class="sales-graph-heading">
          <div class="col-md-5 col-sm-5">
            <h5 class="no-margin">You have earned</h5>
            <h4>
              <span
                class="item-count animate-number semi-bold"
                data-value="21451"
                data-animation-duration="700"
              >{{allTotal.toLocaleString()}}</span> USD
            </h4>
          </div>
          <div class="col-md-3 col-sm-3">
            <p class="semi-bold">TODAY</p>
            <h4>
              <span
                class="item-count animate-number semi-bold"
                data-value="451"
                data-animation-duration="700"
              >451</span> USD
            </h4>
          </div>
          <div class="col-md-4 col-sm-3">
            <p class="semi-bold">THIS MONTH</p>
            <h4>
              <span
                class="item-count animate-number semi-bold"
                data-value="8514"
                data-animation-duration="700"
              >8,514</span> USD
            </h4>
          </div>
          <div class="clearfix"></div>
        </div>
      </div>
      <h5 class="semi-bold m-t-30 m-l-30">RECENT BILLS</h5>
      <table class="table no-more-tables m-t-20 m-l-20 m-b-30">
        <thead style="display:none">
          <tr>
            <th style="width:9%">Project Name</th>
            <th style="width:22%">Description</th>
            <th style="width:6%">Price</th>
            <th style="width:1%"></th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="monthTotal in monthlyTotals">
            <td class="v-align-middle bold text-success">25601</td>
            <td class="v-align-middle">
              <span class="muted">{{monthTotal.month}}</span>
            </td>
            <td>
              <span class="muted bold text-success">{{monthTotal.total}}</span>
            </td>
            <td class="v-align-middle"></td>
          </tr>
        </tbody>
      </table>
      <div id="sales-graph" class="rickshaw_graph">
        <svg width="677" height="108">
          <g>
            <path
              d="M0,14.199203324006348Q11.974149659863947,12.437570830373168,13.816326530612246,12.768526251474881C16.579591836734693,13.26495938312745,24.869387755102043,19.933745619265412,27.63265306122449,19.16353464053205S38.68571428571429,6.408167857668282,41.44897959183674,5.066416464141241S52.502040816326534,4.582707127530468,55.26530612244898,5.7460207052616425S66.31836734693877,15.683441815360283,69.08163265306122,16.69955224145299S80.13469387755103,16.47036398307949,82.89795918367348,15.907124966188732S93.95102040816326,11.269974394035497,96.71428571428571,11.067162072545415S107.76734693877552,13.859430191354893,110.53061224489797,13.879001751287916S121.58367346938776,11.734821897588699,124.34693877551021,11.262877671875643S135.4,8.485512182456725,138.16326530612244,9.15955949415735S149.21632653061224,17.016429583371053,151.9795918367347,18.00335078888189S163.03265306122452,19.484673813497345,165.79591836734696,19.0287715492657S176.84897959183675,13.051127474586952,179.6122448979592,13.444328146565411S190.66530612244898,22.520031328328606,193.42857142857142,22.96077826905028S204.4816326530612,17.7068361596159,207.24489795918367,17.851797553782163S218.2979591836735,24.49962447003929,221.06122448979593,24.4103922107129S232.11428571428573,17.439987734415226,234.87755102040816,16.959474960518264S245.93061224489796,20.191051809884975,248.69387755102042,19.60526447174327S259.7469387755103,12.125985862471481,262.5102040816327,11.101601579101185S273.56326530612245,9.00906607133419,276.3265306122449,9.361421638040312S287.37959183673473,14.308475086585883,290.14285714285717,14.625157246162402S301.19591836734696,12.776063984584273,303.9591836734694,12.528243233805497S315.0122448979592,12.771941834992571,317.7755102040816,12.146949738374644S328.8285714285715,6.674072808673434,331.5918367346939,6.278322267626237S342.6448979591837,7.848868751558119,345.40816326530614,8.189444327902677S356.46122448979594,10.121760183918523,359.2244897959184,9.68407803107182S370.2775510204082,4.67409990947352,373.04081632653066,3.812622799435644S384.0938775510204,0.4216151509311943,386.85714285714283,1.0693069306930596S397.9102040816327,9.433144178580347,400.6734693877551,10.289540597054298S411.7265306122449,10.219569710976135,414.48979591836735,9.633271115432564S425.5428571428572,3.641518279693381,428.30612244897964,4.42655464161858S439.35918367346943,16.86486071293361,442.12244897959187,17.483634734684557S453.1755102040816,12.20065558362793,455.93877551020404,10.614294859128066S466.9918367346939,2.0400050165960946,469.7551020408163,1.62002748968591S480.8081632653061,5.659197858263741,483.57142857142856,6.414519590026217S494.6244897959184,8.858425310556143,497.38775510204084,9.173244807310667S508.4408163265307,9.883182010547893,511.20408163265313,9.562714557571454S522.257142857143,6.515754703170816,525.0204081632654,5.968570277546277S536.0734693877552,3.95621564292898,538.8367346938776,4.090870301326063S549.8897959183673,6.495149528250852,552.6530612244898,7.315116861517112S563.7061224489796,12.679896091332896,566.469387755102,12.290543633988662S577.5224489795919,3.070336248655488,580.2857142857143,3.4215922880747627S591.3387755102042,14.476372995875186,594.1020408163266,15.803104028181409S605.1551020408164,17.998874224859254,607.9183673469388,16.68890261113698S618.9714285714286,3.226086296049381,621.7346938775511,2.7033878909586946S632.7877551020408,10.86246995025636,635.5510204081633,11.461918560230117S646.6040816326531,8.63660538942326,649.3673469387755,8.697873990696266S660.4204081632654,11.306700309590536,663.1836734693878,12.074604572960183Q665.0258503401361,12.586540748539948,677,16.376916624392734L677,57.480298011815954Q665.0258503401361,62.82981709741015,663.1836734693878,63.01664730756434C660.4204081632654,63.296892622795625,652.130612244898,60.58662761570557,649.3673469387755,60.282751164128825S638.3142857142857,60.41906982428699,635.5510204081633,59.97788279179696S624.4979591836735,55.71831073999391,621.7346938775511,55.87088083922848S610.6816326530612,61.28517569766219,607.9183673469388,61.503583784142634S596.865306122449,58.87167529771146,594.1020408163266,58.05496170403293S583.0489795918368,53.685964640514555,580.2857142857143,53.33644784735727S569.2326530612245,54.64549403509851,566.469387755102,54.55979377246006S555.4163265306122,52.07722866363767,552.6530612244898,52.47944522097282S541.6,58.44438134908586,538.8367346938776,58.58195934581157S527.7836734693878,54.35173525994018,525.0204081632654,53.8552251882299S513.9673469387756,53.006239308311216,511.20408163265313,53.616858628708776S500.1510204081633,59.98750091982611,497.38775510204084,59.96141839220549S486.334693877551,54.261970994047786,483.57142857142856,53.356033352502536S472.51836734693876,50.792467838230245,469.7551020408163,50.90204197675301S458.7020408163265,53.57510074738735,455.93877551020404,54.45177473773022S444.8857142857143,59.99679050206092,442.12244897959187,59.668781880181655S431.06938775510207,51.002498062108565,428.30612244897964,51.17168851893761S417.2530612244898,60.76400896538816,414.48979591836735,61.36068644847211S403.43673469387755,58.02531468564702,400.6734693877551,57.138463349777105S389.62040816326527,52.57379582939479,386.85714285714283,52.492173089772955S375.8040816326531,55.37076059742888,373.04081632653066,56.32223595355874S361.9877551020408,61.834362187397055,359.2244897959184,62.006926651071545S348.1714285714286,58.52148255692443,345.40816326530614,58.04788059030363S334.35510204081635,57.10676861778082,331.5918367346939,57.27090698486348S320.53877551020406,59.751664161055686,317.7755102040816,59.68926426113023S306.72244897959183,57.0463041263192,303.9591836734694,56.64690798560894S292.9061224489796,55.6040635745615,290.14285714285717,55.69530285402765S279.0897959183673,57.435243806867874,276.3265306122449,57.55930078027046S265.27346938775514,56.144737943779,262.5102040816327,56.93587258805356S251.45714285714288,65.21764128806224,248.69387755102042,65.47064722301607S237.6408163265306,59.48066007649409,234.87755102040816,59.46593193759187S223.82448979591837,65.41622330632896,221.06122448979593,65.32336583399386S210.00816326530614,58.63376187952273,207.24489795918367,58.537357214240835S196.19183673469385,64.62451265962451,193.42857142857142,64.35931918117493S182.37551020408162,55.95385015716224,179.6122448979592,55.885422429744956S168.5591836734694,63.172405354591525,165.79591836734696,63.67504190700203S154.74285714285716,61.65638709012281,151.9795918367347,60.911787953850016S140.92653061224487,56.96928258070487,138.16326530612244,56.229050544274095S127.11020408163266,53.29287535317555,124.34693877551021,53.50946758954227S113.29387755102042,58.27603331382086,110.53061224489797,58.39497290794126S99.47755102040816,54.14171857129689,96.71428571428571,54.69886353074626S85.66122448979593,63.58045335659477,82.89795918367348,63.9664225024349S71.84489795918367,59.176869421774356,69.08163265306122,58.5585549891476S58.02857142857143,57.97909765539383,55.26530612244898,57.78327817616737S44.21224489795919,56.07588639576151,41.44897959183674,56.600360196883024S30.39591836734694,63.28347444997014,27.63265306122449,63.028016187382526S16.579591836734693,54.018776213811016,13.816326530612246,54.04577757100684Q11.974149659863947,54.06377847580405,0,63.29802975934072Z"
              class="area"
              fill="#f2f4f6"
            ></path>
          </g>
          <g>
            <path
              d="M0,63.29802975934072Q11.974149659863947,54.06377847580405,13.816326530612246,54.04577757100684C16.579591836734693,54.018776213811016,24.869387755102043,62.77255792479491,27.63265306122449,63.028016187382526S38.68571428571429,57.12483399800454,41.44897959183674,56.600360196883024S52.502040816326534,57.587458696940914,55.26530612244898,57.78327817616737S66.31836734693877,57.94024055652085,69.08163265306122,58.5585549891476S80.13469387755103,64.35239164827503,82.89795918367348,63.9664225024349S93.95102040816326,55.256008490195626,96.71428571428571,54.69886353074626S107.76734693877552,58.51391250206166,110.53061224489797,58.39497290794126S121.58367346938776,53.72605982590898,124.34693877551021,53.50946758954227S135.4,55.48881850784332,138.16326530612244,56.229050544274095S149.21632653061224,60.16718881757722,151.9795918367347,60.911787953850016S163.03265306122452,64.17767845941253,165.79591836734696,63.67504190700203S176.84897959183675,55.81699470232767,179.6122448979592,55.885422429744956S190.66530612244898,64.09412570272534,193.42857142857142,64.35931918117493S204.4816326530612,58.44095254895894,207.24489795918367,58.537357214240835S218.2979591836735,65.23050836165876,221.06122448979593,65.32336583399386S232.11428571428573,59.45120379868965,234.87755102040816,59.46593193759187S245.93061224489796,65.7236531579699,248.69387755102042,65.47064722301607S259.7469387755103,57.72700723232813,262.5102040816327,56.93587258805356S273.56326530612245,57.68335775367305,276.3265306122449,57.55930078027046S287.37959183673473,55.7865421334938,290.14285714285717,55.69530285402765S301.19591836734696,56.24751184489868,303.9591836734694,56.64690798560894S315.0122448979592,59.62686436120478,317.7755102040816,59.68926426113023S328.8285714285715,57.43504535194614,331.5918367346939,57.27090698486348S342.6448979591837,57.57427862368282,345.40816326530614,58.04788059030363S356.46122448979594,62.179491114746035,359.2244897959184,62.006926651071545S370.2775510204082,57.2737113096886,373.04081632653066,56.32223595355874S384.0938775510204,52.41055035015112,386.85714285714283,52.492173089772955S397.9102040816327,56.25161201390719,400.6734693877551,57.138463349777105S411.7265306122449,61.95736393155606,414.48979591836735,61.36068644847211S425.5428571428572,51.34087897576665,428.30612244897964,51.17168851893761S439.35918367346943,59.34077325830239,442.12244897959187,59.668781880181655S453.1755102040816,55.328448728073084,455.93877551020404,54.45177473773022S466.9918367346939,51.01161611527578,469.7551020408163,50.90204197675301S480.8081632653061,52.450095710957285,483.57142857142856,53.356033352502536S494.6244897959184,59.935335864584864,497.38775510204084,59.96141839220549S508.4408163265307,54.22747794910634,511.20408163265313,53.616858628708776S522.257142857143,53.358715116519626,525.0204081632654,53.8552251882299S536.0734693877552,58.71953734253728,538.8367346938776,58.58195934581157S549.8897959183673,52.88166177830797,552.6530612244898,52.47944522097282S563.7061224489796,54.474093509821614,566.469387755102,54.55979377246006S577.5224489795919,52.986931054199985,580.2857142857143,53.33644784735727S591.3387755102042,57.23824811035439,594.1020408163266,58.05496170403293S605.1551020408164,61.72199187062308,607.9183673469388,61.503583784142634S618.9714285714286,56.02345093846304,621.7346938775511,55.87088083922848S632.7877551020408,59.53669575930692,635.5510204081633,59.97788279179696S646.6040816326531,59.978874712552084,649.3673469387755,60.282751164128825S660.4204081632654,63.296892622795625,663.1836734693878,63.01664730756434Q665.0258503401361,62.82981709741015,677,57.480298011815954L677,108Q665.0258503401361,108,663.1836734693878,108C660.4204081632654,108,652.130612244898,108,649.3673469387755,108S638.3142857142857,108,635.5510204081633,108S624.4979591836735,108,621.7346938775511,108S610.6816326530612,108,607.9183673469388,108S596.865306122449,108,594.1020408163266,108S583.0489795918368,108,580.2857142857143,108S569.2326530612245,108,566.469387755102,108S555.4163265306122,108,552.6530612244898,108S541.6,108,538.8367346938776,108S527.7836734693878,108,525.0204081632654,108S513.9673469387756,108,511.20408163265313,108S500.1510204081633,108,497.38775510204084,108S486.334693877551,108,483.57142857142856,108S472.51836734693876,108,469.7551020408163,108S458.7020408163265,108,455.93877551020404,108S444.8857142857143,108,442.12244897959187,108S431.06938775510207,108,428.30612244897964,108S417.2530612244898,108,414.48979591836735,108S403.43673469387755,108,400.6734693877551,108S389.62040816326527,108,386.85714285714283,108S375.8040816326531,108,373.04081632653066,108S361.9877551020408,108,359.2244897959184,108S348.1714285714286,108,345.40816326530614,108S334.35510204081635,108,331.5918367346939,108S320.53877551020406,108,317.7755102040816,108S306.72244897959183,108,303.9591836734694,108S292.9061224489796,108,290.14285714285717,108S279.0897959183673,108,276.3265306122449,108S265.27346938775514,108,262.5102040816327,108S251.45714285714288,108,248.69387755102042,108S237.6408163265306,108,234.87755102040816,108S223.82448979591837,108,221.06122448979593,108S210.00816326530614,108,207.24489795918367,108S196.19183673469385,108,193.42857142857142,108S182.37551020408162,108,179.6122448979592,108S168.5591836734694,108,165.79591836734696,108S154.74285714285716,108,151.9795918367347,108S140.92653061224487,108,138.16326530612244,108S127.11020408163266,108,124.34693877551021,108S113.29387755102042,108,110.53061224489797,108S99.47755102040816,108,96.71428571428571,108S85.66122448979593,108,82.89795918367348,108S71.84489795918367,108,69.08163265306122,108S58.02857142857143,108,55.26530612244898,108S44.21224489795919,108,41.44897959183674,108S30.39591836734694,108,27.63265306122449,108S16.579591836734693,108,13.816326530612246,108Q11.974149659863947,108,0,108Z"
              class="area"
              fill="#f35958"
            ></path>
          </g>
        </svg>
        <div class="detail inactive" style="left: 221.061px;"></div>
      </div>
    </div>
  </div>
</template>

<style scoped>
</style>

<script>
import { app } from "src/app/app.js";

export default {
  data: function() {
    return {
      bills: app.bills.data,
      monthlyTotals: [],
      allTotal: 0
    };
  },
  watch: {
    biils: function(newBills) {
      summarize(newBills);
    }
  },
  methods: {
    summarize: function(newBills) {
      console.log(newBills);
      let allTotal = 0;
      let monthlyTotals = [];

      for (let month in newBills) {
        const monthlyTotal = this.toNumber(newBills[month].monthTotal);
        allTotal += monthlyTotal;
        monthlyTotals.push({ month: month, total: monthlyTotal });
      }

      this.allTotal = allTotal;
      this.monthlyTotals = monthlyTotals;
    },
    toNumber(currenty) {
      return Number(currenty.replace(/[^0-9.-]+/g, ""));
    }
  },
  mounted: function() {
    this.summarize(this.bills);
  }
};
</script>

